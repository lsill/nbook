---
title: "ifconfig命令解释"
date: 2023-05-08T12:09:48+08:00
draft: true
---

### 1.CIDR(无类型域间选路)定义
打破了ABCDE几类i地址的做法，将32位ip地址一分为二，前面是网络号，后面是主机号。

### 2.如何区分网络号和主机号
例如32位ip地址 `10.10.10.10/24`，斜杠后面的24意思就是前24位是网络号，后8位是主机号。

### 3.广播地址和子网掩码
32位ip地址 `10.10.10.10/24`中，像10.10.10.255就是`广播地址`，如果发送这个地址，则10.10.10网络里面的机器都可以收到。子网掩码就是255.255.255.0（子网掩码和ip地址进行与运算就可以得到网络号）。

### 4.ip地址后的scope
对于eth0这张网卡来讲是global，说明这张网卡可以对外的，可以接收来自各个地方的包。对于lo来讲，是host，说明这张网卡仅仅可以供本机互相通信。
lo全称loopback，又称环回接口，往往会被分配到127.0.0.1这个地址。这个地址用于本机通信，经过内核处理后直接返回，不会在网络中出现。

### 5.Mac地址+ip地址定位
Mac地址更像是身份证是一个唯一的标识，它的唯一性设计是为了组网的时候，不同的网卡放在一个网络的时候，可以不用担心冲突。从硬件的角度，保证不同的网卡有不同的标识。
Mac地址有一定的定位功能，只不过范围非常有限。一个网络包要从一个地方传到另一个地方，除了要有确定的地址，还需要有定位功能。而门牌号码属性的IP地址，才是有远程定位功能的。
Mac地址的通信范围比较叫，仅局限在一个子网里面。例如，从 192.168.0.2/24 访问 192.168.0.3/24 是可以用 MAC 地址的。一旦跨子网，即从 192.168.0.2/24 到 192.168.1.2/24，MAC 地址就不行了，需要 IP 地址起作用了。

### 6.网络设备的状态
<BROADCAST,MULTICAST,LOWER_UP> net_device flags,网络设备的状态标识。
- UP：表示网卡处于启动状态
- BROADCAST：表示这个网卡有广播地址，可以发送广播包。
- MULTICAST：标识网卡可以发送多播包
- LOWER_UP：标识L1是启动的，也即网线插着的。
- MTU1500:最大传输单元MTU为1500，这是以太网的默认值。MTU是MAC层的概念，MAC层有MAC的头，以太网规定正文部分不允许超过1500个字节。正文里面有IP的头，、TCP的头、HTTP的头。入如果放不下就需要分片传输。
- qdisc pfifo_fast:qdisc全称是queueing discipline，中文叫排队规则。内核如果需要通过某个网络接口发送数据包，它都需要按照为这个接口配置的qdisc（排队规则）把数据包加入队列。
- pfifo：最简单的 qdisc，它不对进入的数据包做任何的处理，数据包采用先入先出的方式通过队列。pfifo_fast 稍微复杂一些，它的队列包括三个波段（band）。在每个波段里面，使用先进先出规则。
- pfifo_fast：稍微复杂一些，它的队列包括三个波段（band）。在每个波段里面，使用先进先出规则。三个波段（band）的优先级也不相同。band 0 的优先级最高，band 2 的最低。如果 band 0 里面有数据包，系统就不会处理 band 1 里面的数据包，band 1 和 band 2 之间也是一样。数据包是按照服务类型（Type of Service，TOS）被分配到三个波段（band）里面的。TOS 是 IP 头里面的一个字段，代表了当前的包是高优先级的，还是低优先级的。


### 7.课代表笔记


#### 面试考点：
	
1.  ip addr → 不知道基本没有用Linux
2.  ifconfig 和 ip addr 的区别吗？
3.  CIDR
4.  共有IP和私有IP
5.  MAC地址
6.  网络设备的状态标识

##### 知识点：
	
###### 核心：
	
1. IP设计时犯的错误？
	
低估了未来网络的发展，32位地址不够用。于是有了现在IPv6（128位）
分类错误。分成了5类。C类太少，B类太多。C类254个，网络都不够；D类6万多，给企业都太多。
	
2. 那后来者如何弥补IP设计者犯的错误呢？
	
CIDR，无类型域间选路。
打破原来几类地址设计的做法，将32位IP地址一分二，前者网络号，后者主机号。
如何分呢？
栗子：10.100.122.2/24
24 = 前24位是网络号，那么后8位就是主机号。
那如何用？
如发送行信息给 10.100.122.255
所有以 10.100.122... 开头的机器都能收到。
于是有了两个概念：
广播地址：10.100.122.255
子网掩码：255.255.255.0 -> AND 得到网络号。
	
3. 每一个城市都有人民广场，IP设计是如何解决的？
	
公有IP地址和私有IP地址。
搭建世界人民都可以访问的网站，需要共有IP地址
搭建只有学校同学使用饿的网站，只要私有IP地址
例子1: Wi-Fi
 192.168.0.x 是最常用的私有 IP 地址
192.168.0 是网络号
192.168.0.1，往往就是你这个私有网络的出口地址
192.168.0.255 就是广播地址。一旦发送这个地址，整个 192.168.0 网络里面的所有机器都能收到。

例子2: 16.158.165.91/22

4. 如何理解MAC地址？
	
如果说IP是地址，有定位功能。那Mac就是身份证，唯一识别。
	
###### 琐碎：
	
5. 讲了ABC，那是D类是什么？
	
D 类是组播地址。使用这一类地址，属于某个组的机器都能收到。这有点类似在公司里面大家都加入了一个邮件组。发送邮件，加入这个组的都能收到。组播地址在后面讲述 VXLAN 协议的时候会提到。
	
6. IP地址scope是什么意思？
	
对于 eth0 这张网卡来讲，是 global，说明这张网卡是可以对外的，可以接收来自各个地方的包。对于 lo 来讲，是 host，说明这张网卡仅仅可以供本机相互通信。
	
7. 那lo是什么意思？
	
lo 全称是loopback，又称环回接口，往往会被分配到 127.0.0.1 这个地址。这个地址用于本机通信，经过内核处理后直接返回，不会在任何网络中出现。
	
8. < BROADCAST,MULTICAST,UP,LOWER_UP > 是干什么的？
	
net_device flags，网络设备的状态标识。
UP 表示网卡处于启动的状态；
BROADCAST 表示这个网卡有广播地址，可以发送广播包；
MULTICAST 表示网卡可以发送多播包；
LOWER_UP 表示 L1 是启动的，也即网线插着呢。
	
9. MTU1500 是指什么意思呢？是哪一层的概念？
	
最大传输单元 MTU 为 1500，这是以太网的默认值。
MTU 是二层 MAC 层的概念。MAC 层有 MAC 的头，以太网规定连 MAC 头带正文合起来，不允许超过 1500 个字节。
	
10. qdisc pfifo_fast 是什么意思呢？
	
排队规则。规定数据包如何进出的。有pfifo, pfifo_fast. 